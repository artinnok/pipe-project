import numpy as np
import matplotlib.pyplot as plt
import matplotlib
from sklearn.linear_model import LinearRegression


Mode=np.array([5,5,5,5,5,6,6,6,6,6,6,5,5,5,6,6,4,6,6,6,4,6,6,6,6,6,6,6,4,6,6,6,4,6,6,8,8,8,8,6,6,6,6,6,8,8])
Pn1=np.array([54.6,54.6,54.7,54.8,54.1,52.4,53.1,53,53,52.8,52.8,54.2,54.8,54.7,53.2,53.1,30.5,53.5,53,52.9,30.3,53.1,53.1,52.4,53,53,52.6,52.7,30.2,52.8,53.3,52.3,29.1,51.4,51.6,51.3,51.4,51.1,50.7,52.7,52.6,52.6,53.1,52.5,50.8,50.8])
Pn2=np.array([55.1,55.1,55,55.1,54.6,52.8,53.4,53.3,53.3,53.3,53,54.4,55,55,53.4,53.6,30.8,53.6,53.3,53.1,30.6,53.4,53.3,52.9,53.3,53.3,53,53,30.5,53,53.4,52.6,29.4,51.7,51.9,51.7,51.6,51.6,50.9,52.9,52.9,52.8,53.4,52.8,51,51])
Pk1=np.array([24.7,24.7,25,25.2,24.5,19.3,18.6,19.1,19.1,18.5,18.1,24.2,25.1,25.2,18.7,18.7,7.6,18.9,18.5,18.6,7.6,19.1,18.9,18.5,18.4,18.5,18.4,18.3,8,19.2,19.1,18.4,6.9,18.5,18.6,11.3,11.6,11.4,10.4,17.7,18.4,18.2,18.4,18.2,11.6,11.6])
Pk2=np.array([25,25,25.4,25.4,24.8,19.6,18.8,19.4,19.3,18.8,18.3,24.5,25.5,25.4,19,19,7.8,19.1,18.9,18.8,7.9,19.3,19.3,18.8,18.8,18.9,18.7,18.6,8.2,19.7,19.2,18.7,7.3,18.8,18.8,11.9,11.8,11.7,10.5,17.9,18.6,18.6,18.8,18.4,11.9,11.9])
Mr=np.array([43.88,44.16,44.05,44.18,44.40,48.25,48.60,48.60,49.02,48.95,48.84,44.70,44.52,44.00,47.82,48.28,37.57,47.95,48.48,48.72,36.77,48.60,48.72,48.83,48.72,48.48,48.48,48.72,39.00,47.88,48.84,49.16,37.86,48.54,48.70,53.16,53.72,54.07,54.04,49.08,48.90,48.70,48.68,48.84,53.68,53.68])
Pn=np.array([850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00,850.00])
Zn=113.0
Zk=141.4



PnM=(((Pn1+Pn2)/2)*98067+101350)/(Pn*9.8)+Zn
PkM=(((Pk1+Pk2)/2)*98067+101350)/(Pn*9.8)+Zk

MrN=((Mr*1000*1000)/86400)/Pn
dh = PnM - PkM

a = dh
b = MrN
b.shape = (len(b), 1)

cln = LinearRegression()
cln.fit(b,a)
plt.scatter(b,a)

plt.xlabel('Q, м3/с')
plt.ylabel('H, м')
# plt.plot(b, cln.predict(b))

plt.figure(2)
data = (a - cln.predict(b))*100/cln.predict(b)
plt.xlabel('Отклонение в %')
plt.ylabel('Количество')
plt.hist(data)

matplotlib.rcParams.update({'font.size': 30})
plt.show()








